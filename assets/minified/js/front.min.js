(()=>{"use strict";const e="smoothscroll",t=`.wp.${e}`,i=`resize${t}`,o=`load${t}`,s=`click${t}`,r=`keydown${t}`,l=`mousedown${t}`,n={frameRate:"number",animationTime:"number",stepSize:"number",pulseAlgorithm:"boolean",pulseScale:"number",pulseNormalize:"number",accelerationDelta:"number",accelerationMax:"number",keyboardSupport:"boolean",arrowScroll:"number",behavior:"string",offset:"number"},h={frameRate:150,animationTime:1e3,stepSize:100,pulseAlgorithm:!0,pulseScale:4,pulseNormalize:1,accelerationDelta:50,accelerationMax:3,keyboardSupport:!0,arrowScroll:50,behavior:"smooth",offset:0};(function(t){const{Component:a,Events:c,fn:{getElement:_,getOptions:d}}=t;class u extends a{constructor(e,t){super(e,t),this._config=this._getConfig(t),this._init()}static get Default(){return h}static get DefaultType(){return n}static get NAME(){return e}scrollTo(e,t={}){const i=_(e);if(!i)return;const o={...this._config,...t},s=i.offsetTop-o.offset;"smooth"===o.behavior?this._smoothScrollTo(s):window.scrollTo({top:s,behavior:o.behavior})}destroy(){this._clearAllTimers(),this._removeAllEventListeners(),this._clearAllCaches(),this._observer&&(this._observer.disconnect(),this._observer=null),this._wheelHandler=null,this._keydownHandler=null,this._mousedownHandler=null,this._clickHandler=null,this._refreshSize=null,super.dispose()}_init(){"undefined"!=typeof wecodeartSupportModulesSmoothscroll&&(this._config={...this._config,...wecodeartSupportModulesSmoothscroll}),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(this._config.behavior="auto",this._config.animationTime=0),this._setupVariables(),this._addEventListeners(),this._initSmoothScroll()}_initSmoothScroll(){!this._initDone&&document.body&&(this._initDone=!0,this._initTest(),this._setupFrameDetection())}_initTest(){this._isEnabledForBrowser=this._isEnabledForBrowserCheck()}_setupFrameDetection(){top!==self&&(this._isFrame=!0)}_setupVariables(){this._isFrame=!1,this._direction={x:0,y:0},this._initDone=!1,this._root=document.documentElement,this._activeElement=document.body,this._observer=null,this._deltaBuffer=[],this._deltaBufferTimer=null,this._isMac=/^Mac/.test(navigator.platform),this._que=[],this._pending=!1,this._lastScroll=Date.now(),this._cacheX=new WeakMap,this._cacheY=new WeakMap,this._clearCacheTimer=null,this._resizeTimer=null,this._smoothBehaviorForElement=new WeakMap,this._wheelHandler=this._handleWheel.bind(this),this._keydownHandler=this._handleKeydown.bind(this),this._mousedownHandler=this._handleMousedown.bind(this),this._clickHandler=this._handleClick.bind(this),this._refreshSize=this._handleResize.bind(this)}_addEventListeners(){c.on(document,s,this._clickHandler),this._config.keyboardSupport&&c.on(document,r,this._keydownHandler),c.on(document,l,this._mousedownHandler),window.addEventListener("wheel",this._wheelHandler,{passive:!1,capture:!0}),c.on(window,i,this._refreshSize)}_handleClick(e){const t=e.target.closest('a[href^="#"]');t&&"#"!==t.getAttribute("href")&&(e.preventDefault(),this.scrollTo(t.getAttribute("href")))}_handleResize(){clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout((()=>{this._clearAllCaches()}),250)}_handleMousedown(e){this._activeElement=this._getEventTargetDeep(e)}_handleKeydown(e){try{const t=this._getEventTargetDeep(e),i=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&"Space"!==e.code,o=/^(textarea|select|embed|object)$/i,s=/^(button|submit|radio|checkbox|file|color|image)$/i;if(e.defaultPrevented||o.test(t.nodeName)||this._isNodeName(t,"input")&&!s.test(t.type)||this._isNodeName(this._activeElement,"video")||t.isContentEditable||i)return!0;const r=this._overflowingAncestor(this._activeElement);if(!r)return!0;const l=r.clientHeight;let n=0,h=0;switch(e.code){case"ArrowUp":h=-this._config.arrowScroll;break;case"ArrowDown":h=this._config.arrowScroll;break;case"Space":h=-(e.shiftKey?1:-1)*l*.9;break;case"PageUp":h=.9*-l;break;case"PageDown":h=.9*l;break;case"Home":h=-r.scrollTop;break;case"End":const t=r.scrollHeight-r.scrollTop-l;h=t>0?t+10:0;break;case"ArrowLeft":n=-this._config.arrowScroll;break;case"ArrowRight":n=this._config.arrowScroll;break;default:return!0}this._scrollArray(r,n,h),e.preventDefault(),this._scheduleClearCache()}catch(e){return console.warn("SmoothScroll: Error in keydown handler:",e),!0}}_handleWheel(e){try{if(!this._shouldHandleWheel(e))return!0;const t=this._calculateDeltas(e),i=this._findOverflowingElement(e.target);if(!i)return!0;this._processScroll(i,t),e.preventDefault()}catch(e){return console.warn("SmoothScroll: Error in wheel handler:",e),!0}}_shouldHandleWheel(e){try{this._initDone||this._initSmoothScroll();const t=this._getEventTargetDeep(e);return!e.defaultPrevented&&!e.ctrlKey&&!(this._isNodeName(this._activeElement,"embed")||this._isNodeName(t,"embed")&&/\.pdf/i.test(t.src)||this._isNodeName(this._activeElement,"object"))}catch(e){return console.warn("SmoothScroll: Error in wheel handler:",e),!1}}_calculateDeltas(e){let t=-e.wheelDeltaX||e.deltaX||0,i=-e.wheelDeltaY||e.deltaY||0;return this._isMac&&(e.wheelDeltaX&&this._isDivisible(e.wheelDeltaX,120)&&(t=e.wheelDeltaX/Math.abs(e.wheelDeltaX)*-120),e.wheelDeltaY&&this._isDivisible(e.wheelDeltaY,120)&&(i=e.wheelDeltaY/Math.abs(e.wheelDeltaY)*-120)),t||i||(i=-e.wheelDelta||0),1===e.deltaMode&&(t*=40,i*=40),{deltaX:t,deltaY:i}}_findOverflowingElement(e){const t=[],i=document.body,o=this._root.scrollHeight;for(;e;){const s=this._getCache(e,!1);if(s)return this._setCache(t,s);if(t.push(e),o===e.scrollHeight){const e=this._overflowNotHidden(this._root)&&this._overflowNotHidden(i)||this._overflowAutoOrScroll(this._root);if(this._isFrame&&this._isContentOverflowing(this._root)||!this._isFrame&&e)return this._setCache(t,this._getScrollRoot())}else if(this._isContentOverflowing(e)&&this._overflowAutoOrScroll(e))return this._setCache(t,e);e=e.parentElement||e.getRootNode&&e.getRootNode().host}return null}_processScroll(e,t){let{deltaX:i,deltaY:o}=t;if(1!==this._config.accelerationMax){const e=Date.now()-this._lastScroll;if(e<this._config.accelerationDelta){const t=(1+50/e)/2;if(t>1){const e=Math.min(t,this._config.accelerationMax);i*=e,o*=e}}this._lastScroll=Date.now()}if(this._que.push({x:i,y:o,lastX:i<0?.99:-.99,lastY:o<0?.99:-.99,start:Date.now()}),this._pending)return;const s=this._getScrollRoot(),r=e===s||e===document.body;null==e.$scrollBehavior&&this._isScrollBehaviorSmooth(e)&&(e.$scrollBehavior=e.style.scrollBehavior,e.style.scrollBehavior="auto");const l=t=>{const s=Date.now();let n=0,h=0;for(let e=0;e<this._que.length;e++){const t=this._que[e],i=s-t.start,o=i>=this._config.animationTime;let r=o?1:i/this._config.animationTime;this._config.pulseAlgorithm&&(r=this._pulse(r));const l=t.x*r-t.lastX|0,a=t.y*r-t.lastY|0;n+=l,h+=a,t.lastX+=l,t.lastY+=a,o&&(this._que.splice(e,1),e--)}r?window.scrollBy(n,h):(n&&(e.scrollLeft+=n),h&&(e.scrollTop+=h)),i||o||(this._que=[]),this._que.length?this._requestFrame(l,e,1e3/this._config.frameRate+1):(this._pending=!1,null!=e.$scrollBehavior&&(e.style.scrollBehavior=e.$scrollBehavior,e.$scrollBehavior=null))};this._requestFrame(l,e,0),this._pending=!0}_scrollArray(e,t,i){if(this._directionCheck(t,i),1!==this._config.accelerationMax){const e=Date.now()-this._lastScroll;if(e<this._config.accelerationDelta){const o=(1+50/e)/2;if(o>1){const e=Math.min(o,this._config.accelerationMax);t*=e,i*=e}}this._lastScroll=Date.now()}if(this._que.push({x:t,y:i,lastX:t<0?.99:-.99,lastY:i<0?.99:-.99,start:Date.now()}),this._pending)return;const o=this._getScrollRoot(),s=e===o||e===document.body;null==e.$scrollBehavior&&this._isScrollBehaviorSmooth(e)&&(e.$scrollBehavior=e.style.scrollBehavior,e.style.scrollBehavior="auto");const r=o=>{const l=Date.now();let n=0,h=0;for(let e=0;e<this._que.length;e++){const t=this._que[e],i=l-t.start,o=i>=this._config.animationTime;let s=o?1:i/this._config.animationTime;this._config.pulseAlgorithm&&(s=this._pulse(s));const r=t.x*s-t.lastX|0,a=t.y*s-t.lastY|0;n+=r,h+=a,t.lastX+=r,t.lastY+=a,o&&(this._que.splice(e,1),e--)}s?window.scrollBy(n,h):(n&&(e.scrollLeft+=n),h&&(e.scrollTop+=h)),t||i||(this._que=[]),this._que.length?this._requestFrame(r,e,1e3/this._config.frameRate+1):(this._pending=!1,null!=e.$scrollBehavior&&(e.style.scrollBehavior=e.$scrollBehavior,e.$scrollBehavior=null))};this._requestFrame(r,e,0),this._pending=!0}_smoothScrollTo(e){this._scrollArray(document.body,0,e-window.pageYOffset)}_directionCheck(e,t){e=e>0?1:-1,t=t>0?1:-1,this._direction.x===e&&this._direction.y===t||(this._direction.x=e,this._direction.y=t,this._que=[],this._lastScroll=0)}_isContentOverflowing(e){return e.clientHeight+10<e.scrollHeight}_overflowingAncestor(e){const t=[],i=document.body,o=this._root.scrollHeight;for(;e;){const s=this._getCache(e,!1);if(s)return this._setCache(t,s);if(t.push(e),o===e.scrollHeight){const e=this._overflowNotHidden(this._root)&&this._overflowNotHidden(i)||this._overflowAutoOrScroll(this._root);if(this._isFrame&&this._isContentOverflowing(this._root)||!this._isFrame&&e)return this._setCache(t,this._getScrollRoot())}else if(this._isContentOverflowing(e)&&this._overflowAutoOrScroll(e))return this._setCache(t,e);e=e.parentElement||e.getRootNode&&e.getRootNode().host}}_overflowNotHidden(e){return"hidden"!==getComputedStyle(e,"").getPropertyValue("overflow-y")}_overflowAutoOrScroll(e){const t=getComputedStyle(e,"").getPropertyValue("overflow-y");return"scroll"===t||"auto"===t}_isScrollBehaviorSmooth(e){if(!this._smoothBehaviorForElement.has(e)){const t=getComputedStyle(e,"")["scroll-behavior"];this._smoothBehaviorForElement.set(e,"smooth"==t)}return this._smoothBehaviorForElement.get(e)}_getScrollRoot(){if(!this._scrollRoot&&(this._scrollRoot=document.scrollingElement,!this._scrollRoot)){const e=document.createElement("div");e.style.cssText="height:10000px;width:1px;",document.body.appendChild(e);const t=document.body.scrollTop;document.documentElement.scrollTop,window.scrollBy(0,3),document.body.scrollTop!==t?this._scrollRoot=document.body:this._scrollRoot=document.documentElement,window.scrollBy(0,-3),document.body.removeChild(e)}return this._scrollRoot}_setCache(e,t,i=!1){const o=i?this._cacheX:this._cacheY;for(let i=e.length;i--;)o.set(e[i],t);return t}_getCache(e,t){return(t?this._cacheX:this._cacheY).get(e)}_scheduleClearCache(){clearTimeout(this._clearCacheTimer),this._clearCacheTimer=null}_isTouchpad(e){if(!e)return!1;this._deltaBuffer.length||(this._deltaBuffer=[e,e,e]),e=Math.abs(e),this._deltaBuffer.push(e),this._deltaBuffer.shift(),clearTimeout(this._deltaBufferTimer),this._deltaBufferTimer=setTimeout((()=>{try{localStorage.SS_deltaBuffer=this._deltaBuffer.join(",")}catch(e){}}),1e3);const t=e>120&&this._allDeltasDivisableBy(e),i=!this._allDeltasDivisableBy(120)&&!this._allDeltasDivisableBy(100)&&!t;return e<50||i}_isDivisible(e,t){return Math.floor(e/t)==e/t}_allDeltasDivisableBy(e){return this._isDivisible(this._deltaBuffer[0],e)&&this._isDivisible(this._deltaBuffer[1],e)&&this._isDivisible(this._deltaBuffer[2],e)}_pulse(e){return e>=1?1:e<=0?0:(1==this._config.pulseNormalize&&(this._config.pulseNormalize/=this._pulse_(1)),this._pulse_(e))}_pulse_(e){let t,i,o;return(e*=this._config.pulseScale)<1?t=e-(1-Math.exp(-e)):(i=Math.exp(-1),e-=1,o=1-Math.exp(-e),t=i+o*(1-i)),t*this._config.pulseNormalize}_requestFrame(e,t,i){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e,t,i){window.setTimeout(e,i||1e3/60)})(e,t,i)}_getEventTargetDeep(e){return e.composedPath?e.composedPath()[0]:e.target}_isNodeName(e,t){return e&&(e.nodeName||"").toLowerCase()===t.toLowerCase()}_isEnabledForBrowserCheck(){const e=navigator.userAgent,t=navigator.platform,i=this._detectBrowser(e,t);return this._isBrowserSupported(i)}_isBrowserSupported(e){const t=["Mobile","Edge","Chrome","Safari","Firefox","IEWin7","other"];return e.isMobile?t.indexOf("Mobile")>=0:e.isEdge?t.indexOf("Edge")>=0:e.isChrome?t.indexOf("Chrome")>=0:e.isSafari?t.indexOf("Safari")>=0:e.isFirefox?t.indexOf("Firefox")>=0:e.isIEWin7?t.indexOf("IEWin7")>=0:t.indexOf("other")>=0}_detectBrowser(e,t){const i=/Edge/.test(e),o=/chrome/i.test(e)&&!i,s=/safari/i.test(e)&&!i;return{isEdge:i,isChrome:o,isSafari:s,isFirefox:/firefox/i.test(e),isMobile:/mobile/i.test(e),isIEWin7:/Windows NT 6.1/i.test(e)&&/rv:11/i.test(e),isOldSafari:s&&(/Version\/8/i.test(e)||/Version\/9/i.test(e))}}_clearAllTimers(){clearTimeout(this._deltaBufferTimer),clearTimeout(this._clearCacheTimer),clearTimeout(this._resizeTimer)}_clearAllCaches(){this._deltaBuffer=[],this._que=[],this._pending=!1}_removeAllEventListeners(){c.off(document,s,this._clickHandler),c.off(document,r,this._keydownHandler),c.off(document,l,this._mousedownHandler),c.off(window,i,this._refreshSize),c.off(window,o,this._initSmoothScroll),window.removeEventListener("wheel",this._wheelHandler,{passive:!1,capture:!0})}_getConfig(e){return e={...h,...d(this._element),...e},this._typeCheckConfig(e),e}}t.plugins.SmoothScroll=u,c.on(document,"DOMContentLoaded",(()=>{new u(document.documentElement)}))}).apply(void 0,[window.wecodeart])})();